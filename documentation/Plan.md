# План автоматизации тестирования сервиса покупки тура

## 1. Перечень автоматизируемых сценариев:

### Предусловия:
1. Запустить Docker;
2. Выполнить ```Docker-compose up```;
3. Запустить в консоле java -jar aqa-shop.jar;
4. Открыть главную страницу сайта (http://localhost:8080/), нажать на кнопку `Купить` или `Купить в кредит`, открывается форма ввода данных карты.

### Валидные значения полей:
- `Номер карты`: 16 числовых символов без пробелов.  качестве тестовых данных будут использоваться карты:
    * 4444 4444 4444 4441, status APPROVED;
    * 4444 4444 4444 4442, status DECLINED.
- `Месяц`: 2 числовых символа от 01 до 12 включительно. Если поле `Год` заполняется текущим годом, то значение поля `Месяц` должно превышать текущий месяц или равно текущему месяцу.
- `Год`: 2 числовых символа. Значение не ранее текущего года и не позднее 5 лет от текущего года `YY` (две последние цифры).
- `Владелец`: не менее 2-х латинских буквенных символов, может содержать пробелы, дефисы;
- `CVC/CVV`: 3 числовых символа в диапазоне от 001 до 999.

### Тестовые сценарии заполнения формы:

*!Валидация полей проводится одинаково для кнопок `Купить` и `Купить в кредит`. Результат запроса ожидается после нажатия кнопки `Продолжить`*

#### Позитивные сценарии:

#### 1. Оплата зарегистрированной картой:
1. Ввести в поле `Номер карты` одобренную карту 4444 4444 4444 4441.
2. Ввести в поля `Месяц`, `Год`, `Владелец`, `CVC/CVV` валидные данные в соответствии с требованиями.
   
*Ожидаемый результат:* Данные отправляются. Появляется сообщение об успешно отправленной форме.

#### 2. Оплата отклоненной картой:
1. Ввести в поле `Номер карты` отклоненную карту 4444 4444 4444 4442.
2. Ввести в поля `Месяц`, `Год`, `Владелец`, `CVC/CVV` валидные данные в соответствии с требованиями.
   
*Ожидаемый результат:* Данные отправляются. Появляется сообщение об отказе в операции.

#### Негативные сценарии:

#### 3. Отправка пустой формы:
1. Оставить поля `Номер карты`, `Месяц`, `Год`, `Владелец`, `CVC/CVV` пустыми. 

*Ожидаемый результат:* Данные не отправляются. Поля подсвечиваются, выводится текст "Обязательное поле".


####  Валидация поля `Номер карты`:
*Тестирование проводится только для поля `Номер карты`. Поля `Месяц`, `Год`, `Владелец`, `CVC/CVV`, заполняются валидными данными в соответствии с требованиями.*

4.	Оставить поле `Номер карты` пустым.

*Ожидаемый результат:* Данные не отправляются. Поле подсвечивается, выводится текст "Обязательное поле".

5. Ввести в поле `Номер карты` 15 числовых символов.
   
*Ожидаемый результат:* Данные не отправляются. Поле подсвечивается, выводится текст "Неверный формат".

6. Ввести в поле `Номер карты` случайный набор 16 числовых символов.
   
*Ожидаемый результат:* Данные отправляются. Появляется сообщение об отказе в операции. 

7. Ввести в поле `Номер карты` 17 числовых символов.
   
*Ожидаемый результат:* Ввод семнадцатого символа невозможен.

8. Ввести в поле `Номер карты` буквенные символы, спецсимволы

*Ожидаемый результат:* Ввод невозможен. Поле остается пустым, подсвечивается, выводится текст "Обязательное поле".

####  Валидация поля `Месяц`:
*Тестирование проводится только для поля `Месяц`. Поля `Номер карты`, `Год`, `Владелец`, `CVC/CVV`, заполняются валидными данными в соответствии с требованиями.*

9.	Оставить поле `Месяц` пустым.

*Ожидаемый результат:* Данные не отправляются. Поле подсвечивается, выводится текст "Обязательное поле".

10. Ввести в поле `Месяц` номер месяца 00.

*Ожидаемый результат:* Данные не отправляются. Поле подсвечивается, выводится текст "Неверно указан срок действия карты".

11. Ввести в поле `Месяц` номер месяца 13.
   
*Ожидаемый результат:* Данные не отправляются. Поле подсвечивается, выводится текст "Неверно указан срок действия карты".

12. Ввести в поле `Месяц` значение ранее текущего месяца.

*Ожидаемый результат:* Данные не отправляются. Поле подсвечивается, выводится текст "Неверно указан срок действия карты" 

13. Ввести в поле `Месяц` одно числовое значение.
      
*Ожидаемый результат:* Данные не отправляются. Поле подсвечивается, выводится текст "Неверный формат"

14. Ввести в поле `Месяц` 3 числовых значения.
      
*Ожидаемый результат:* Ввод третьего символа невозможен.

15. Ввести в поле `Месяц` буквенные символы, спецсимволы

*Ожидаемый результат:* Ввод невозможен. Поле остается пустым, подсвечивается, выводится текст "Обязательное поле".

####  Валидация поля `Год`:
*Тестирование проводится только для поля `Год`. Поля `Номер карты`, `Месяц`, `Владелец`, `CVC/CVV`, заполняются валидными данными в соответствии с требованиями.*

16. Оставить поле `Год` пустым.

*Ожидаемый результат:* Данные не отправляются. Поле подсвечивается, выводится текст "Обязательное поле".

17. Ввести в поле `Год` значение ранее текущего года.

*Ожидаемый результат:* Данные не отправляются. Поле подсвечивается, выводится текст "Неверно указан срок действия карты".

18. Ввести в поле `Год` значение более 5 лет от текщего года.

*Ожидаемый результат:* Данные не отправляются. Поле подсвечивается, выводится текст "Неверно указан срок действия карты".

19. Ввести в поле `Год` одно числовое значение.
      
*Ожидаемый результат:* Данные не отправляются. Поле подсвечивается, выводится текст "Неверный формат"

20. Ввести в поле `Год` 3 числовых значения.
      
*Ожидаемый результат:* Ввод третьего символа невозможен.

21. Ввести в поле `Год` буквенные символы, спецсимволы.

*Ожидаемый результат:* Ввод невозможен. Поле остается пустым, подсвечивается, выводится текст "Обязательное поле".

####  Валидация поля `Владелец`:
*Тестирование проводится только для поля `Владелец`. Поля `Номер карты`, `Месяц`, `Год`, `CVC/CVV`, заполняются валидными данными в соответствии с требованиями.*

22. Оставить поле `Владелец` пустым.

*Ожидаемый результат:* Данные не отправляются. Поле подсвечивается, выводится текст "Обязательное поле".

23. Ввести в поле `Владелец` 1 латинский символ.

*Ожидаемый результат:* Данные не отправляются. Поле подсвечивается, выводится текст "Неверный формат".

24. Ввести в поле `Владелец` 65 латинских символов.

*Ожидаемый результат:* Ввод свыше 64 символов  невозможен.

25. Ввести в поле `Владелец` символы на кириллице, числовые значения, спецсимволы.
   
*Ожидаемый результат:* Ввод невозможен. Поле остается пустым, подсвечивается, выводится текст "Обязательное поле".

####  Валидация поля `CVC/CVV`:
*Тестирование проводится только для поля `Владелец`. Поля `Номер карты`, `Месяц`, `Год`, `Владелец`, заполняются валидными данными в соответствии с требованиями.*

26. Оставить поле `CVC/CVV` пустым.

*Ожидаемый результат:* Данные не отправляются. Поле подсвечивается, выводится текст "Обязательное поле".

27. Ввести в поле `CVC/CVV` 1 числовой символ.

*Ожидаемый результат:* Данные не отправляются. Поле подсвечивается, выводится текст "Неверный формат".

28. Ввести в поле `CVC/CVV` 4 числовых символов.

*Ожидаемый результат:* Ввод свыше 3 символов  невозможен.

29. Ввести в поле `CVC/CVV` 000.

*Ожидаемый результат:* Данные не отправляются. Поле подсвечивается, выводится текст "Неверный формат".

30. Ввести в поле `CVC/CVV` буквенные символы, спецсимволы
   
*Ожидаемый результат:* Ввод невозможен. Поле остается пустым, подсвечивается, выводится текст "Обязательное поле".

#### 31. Проверка на соответствие количества строк в СУБД MySQL отправленным данным:
1. Нажать на кнопку `Купить`. 
2. Ввести 4 карты с данными:
   `Номер карты` 4444 4444 4444 4441, `Месяц` 01, `Год` 25, `Владелец` IVANOV IVAN, `CVC/CVV` 156;
   `Номер карты` 4444 4444 4444 4441, `Месяц` 05, `Год` 24, `Владелец` IVANOVA MARIA, `CVC/CVV` 789;
   `Номер карты` 4444 4444 4444 4442, `Месяц` 11, `Год` 25, `Владелец` PETROV VLAD, `CVC/CVV` 348;
   `Номер карты` 4444 4444 4444 4442, `Месяц` 07, `Год` 26, `Владелец` SIDOROVA ALENA, `CVC/CVV` 458.
   
*Ожидаемый результат:* Запросы в БД MySQL выполняются: всего четыре карты, две со статусом APPROVED, две со статусом DECLINE.

#### 32. Просмотр оплаты тура в СУБД MySQL зарегистрированного пользователя:
1. Нажать на кнопку `Купить`. 
2. Ввести в поле `Номер карты` одобренную карту 4444 4444 4444 4441.
3. Ввести в поля `Месяц`, `Год`, `Владелец`, `CVC/CVV` валидные данные в соответствии с требованиями.
4. Нажать на кнопку `Продолжить`.

*Ожидаемый результат:*  Сумма покупки 45 000.

#### 33. Просмотр оплаты тура в СУБД MySQL отклоненного пользователя:
1. Нажать на кнопку `Купить`. 
2. Ввести в поле `Номер карты` отклоненную карту 4444 4444 4444 4442.
3. Ввести в поля `Месяц`, `Год`, `Владелец`, `CVC/CVV` валидные данные в соответствии с требованиями.
4. Нажать на кнопку `Продолжить`.

*Ожидаемый результат:* Сумма покупки 0. Оплата отклонена.

#### 34. Проверка статуса на сервере одобренной карты. API-тест:
1. Нажать на кнопку `Купить`. 
2. Ввести карту с данными:
   `Номер карты` 4444 4444 4444 4441, `Месяц` 01, `Год` 25, `Владелец` IVANOV IVAN, `CVC/CVV` 156;
3. Нажать на кнопку `Продолжить`.
   
*Ожидаемый результат:*  В ответе сервера у карты статус APPROVED.

#### 35. Проверка статуса на сервере отклоненной карты. API-тест:
1. Нажать на кнопку `Купить`. 
2. Ввести карту с данными:
   `Номер карты` 4444 4444 4444 4442, `Месяц` 01, `Год` 25, `Владелец` IVANOV IVAN, `CVC/CVV` 156;
3. Нажать на кнопку `Продолжить`.
   
*Ожидаемый результат:*  В ответе сервера у карты статус DECLINE.

#### 36. Проверка статуса на сервере карты cо случайным набором 16 числовых символов. API-тест:
1. Нажать на кнопку `Купить`. 
2. Ввести карту с данными:
   `Номер карты` 1111 2222 3333 4444, `Месяц` 01, `Год` 25, `Владелец` IVANOV IVAN, `CVC/CVV` 156;
3. Нажать на кнопку `Продолжить`.
   
*Ожидаемый результат:*  В ответе сервера выходит ошибка обработки со статусом 500.


## 2. Перечень используемых инструментов с обоснованием выбора:
* Язык написания тестов: **Java.**
* Среда разработки: **Intellij IDEA.**
* Тестовая среда: **JUnit** - фреймворк для создания юнит-тестов.
* Система автоматизации сборки: **Gradle** - для подключения зависимостей и плагинов.
* Фреймворк управления данными: **Java Facker** - для генерирования данных случайных пользователей.
* Фреймворк **Selenide** - фреймворк для автоматизации тестирования веб-приложений на языке Java.
* Библиотека **Lombok** - для генерации данных.
* Система отчетов: **Allure** - фреймворк для создания отчетов тестирования.
* Система управления версиями: **GIT** - система для управления версиями исходного кода программ.
* Командная оболочка: **Bash** .
* Система контейнеризации: **Docker** - для запуска контейнера БД.
* СУБД: **MySQL, Postgres** - для работы с базами.
* Приложение для работы с базами данных:  **DBeaver** -  клиентское программное приложение 
для SQL и инструмент для администрирования баз данных.
* Сервис для тестирования API: **Postman** - удобно отправлять HTTP запросы, 
создание тестов для проверки ответов от сервера.
* **DevTools** - встроенные в браузер инструменты.


## 3. Перечень и описание возможных рисков при автоматизации:
1. Поиск селекторов тестовой страницы;
2. Вероятность изменения кода страницы (Неактуальные селекторы);
3. Отсутствие технической документации;
4. Технические проблемы (проблема на сервере, нестабильный интернет при тестировании).


## 4. Интервальная оценка с учётом рисков в часах:
1. Планирование автоматизации - 6 часов.
2. Настройка тестового окружения - 4 часов.
3. Написание и прогон тестов - 40-70 часов.
4. Заведение баг-репортов - 6-10 часов.
5. Подготовка отчетной документации тестирования и автоматизации - 8 часов. 


## 5. План сдачи работ (когда будут готовы автотесты, результаты их прогона):
- План автоматизации: 03.05.2023.
- Автотесты: 10.05.2023.
- Подготовка отчетности: 15.05.2023.

RT